# essentials
hostname: sleepy
public_domain: "{{ vault_sleepy_public_domain }}"
username: similicious

# geerlingguy.security
security_ssh_port: 57369
security_sudoers_passwordless:
  - "{{ username }}"

# githubixx.ansible_role_wireguard
wireguard_address: "10.10.0.5/24"
wireguard_endpoint: "{{ public_domain }}"

# traefik
traefik_args: >
  --entrypoints.http.http.redirections.entryPoint.to=https
  --entrypoints.http.http.redirections.entryPoint.scheme=https
  --entrypoints.http.http.redirections.entrypoint.permanent=true
  --entrypoints.https.http.tls.certResolver=letsencrypt
  --entrypoints.https.http.tls.domains[0].main={{ public_domain }}
  --entrypoints.https.http.tls.domains[0].sans=*.{{ public_domain }}
  --certificatesresolvers.letsencrypt.acme.email={{ vault_email }}
  --certificatesresolvers.letsencrypt.acme.dnschallenge=true
  --certificatesresolvers.letsencrypt.acme.dnschallenge.resolvers=193.47.99.5:53,213.133.100.98:53
  --certificatesresolvers.letsencrypt.acme.dnschallenge.delaybeforecheck=10
  --certificatesresolvers.letsencrypt.acme.dnschallenge.provider=hetzner
  --certificatesresolvers.letsencrypt.acme.storage=/ssl-certs/acme.json

traefik_labels:
  traefik.enable: "true"
  traefik.http.routers.catch-all.rule: "PathPrefix(`/`)"
  traefik.http.routers.catch-all.priority: "1"
  traefik.http.routers.catch-all.middlewares: "redirect-catch-all"
  traefik.http.middlewares.redirect-catch-all.redirectregex.regex: ".*{{ public_domain }}.*"
  traefik.http.middlewares.redirect-catch-all.redirectregex.replacement: "{{ vault_traefik_base_domain_redirect_target }}"
  traefik.http.middlewares.redirect-catch-all.redirectregex.permanent: "true"

# bertvv.samba
samba_users:
  - name: "{{ username }}"
    password: "{{ vault_samba_user_password }}"

samba_shares:
  - name: paperless-consume
    path: "{{ docker_service_conf_dir }}/paperless-ngx/consume"
    group: "{{ username }}"
    write_list: "{{ username }}"
